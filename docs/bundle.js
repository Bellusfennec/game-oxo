!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function r(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?t(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function n(t,r,n){return(r=function(t){var r=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===e(r)?r:String(r)}(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function o(){var e=document.querySelector("body"),t=document.querySelector("html");window.innerWidth>window.innerHeight?(e.style.fontSize="2.5vh",t.style.fontSize="2.5vh"):(e.style.fontSize="2.5vw",t.style.fontSize="2.5vw")}o(),window.addEventListener("resize",(function(){return o()}));var i,c=document.querySelector("#game"),a={range:3,fields:[],currentPlayer:"x",won:!1};function l(e,t){document.querySelector("body").insertAdjacentHTML("beforeend",'\n    <div class="modal-background">\n      <div class="modal">\n        <div class="modal-header">'.concat(e,'</div>\n        <div class="modal-body">').concat(t,"</div>\n      </div>\n    </div>\n    "))}function u(e){if(3===e.length){var t=document.querySelectorAll(".col");e.forEach((function(e){var r=a.fields.indexOf(e);t[r].firstElementChild.classList.add("strike")})),a.won=!0}}(i=document.createElement("h1")).textContent="Крестики-нолики",i.classList.add("title"),c.append(i),function e(t,n){var o=document.createElement("button");o.textContent=n,o.classList.add("button-start"),t.append(o),o.addEventListener("click",(function(){a.fields=[],a.won=!1;var t=document.querySelector(".field");t&&t.remove();var n=document.querySelector(".modal-background");n&&n.remove(),function(){var e=document.createElement("div");e.classList.add("field"),c.append(e);for(var t=0;t<a.range;t++){var r=document.createElement("div");r.classList.add("row"),e.append(r);for(var n=0;n<a.range;n++){var o=document.createElement("div");o.classList.add("col"),r.append(o),a.fields.push({x:t,y:n})}}}(),document.querySelectorAll(".col").forEach((function(t,n){t.addEventListener("click",(function(){var o=document.createElement("div");if(""===t.textContent&&!0!==a.won){o.textContent="x"===a.currentPlayer?"x":"o",o.classList.add("item");var i="x"===a.currentPlayer?"player-x":"player-o";t.classList.add(i),t.append(o),a.fields[n]=r(r({},a.fields[n]),{},{mark:a.currentPlayer}),a.currentPlayer="x"===a.currentPlayer?"o":"x",function(t){var r=a.fields.filter((function(e){return e.mark===t.mark&&e.x===t.x})),n=a.fields.filter((function(e){return e.mark===t.mark&&e.y===t.y})),o=a.fields.filter((function(e){return e.mark===t.mark&&e.y===e.x})),i=a.fields.filter((function(e){return e.mark===t.mark&&(0===e.x&&2===e.y||1===e.x&&1===e.y||2===e.x&&0===e.y)}));if(3===r.length||3===n.length||3===o.length||3===i.length)return u(r),u(n),u(o),u(i),void setTimeout((function(){l('Победил "'.concat(t.mark.toUpperCase(),'"'),""),e(document.querySelector(".modal-body"),"Сыграть еще")}),1500);var c=a.fields.filter((function(e){return"x"===e.mark||"o"===e.mark}));9===c.length&&(l("Нет победителя",""),e(document.querySelector(".modal-body"),"Сыграть еще"))}(a.fields[n])}}))})),o.remove()}))}(c,"Начать игру")}();