!function(){"use strict";function e(){const e=document.querySelector("body"),t=document.querySelector("html");window.innerWidth>window.innerHeight?(e.style.fontSize="2.5vh",t.style.fontSize="2.5vh"):(e.style.fontSize="2.5vw",t.style.fontSize="2.5vw")}e(),window.addEventListener("resize",(()=>e()));const t=document.querySelector("#game"),n={range:3,fields:[],currentPlayer:"x",won:!1};function o(e,l){let c=document.createElement("button");c.textContent=l,c.classList.add("button-start"),e.append(c),c.addEventListener("click",(()=>{n.fields=[],n.won=!1;const e=document.querySelector(".field");e&&e.remove();const l=document.querySelector(".modal-background");l&&l.remove(),function(){let e=document.createElement("div");e.classList.add("field"),t.append(e);for(let t=0;t<n.range;t++){const o=document.createElement("div");o.classList.add("row"),e.append(o);for(let e=0;e<n.range;e++){const r=document.createElement("div");r.classList.add("col"),o.append(r),n.fields.push({x:t,y:e})}}}(),document.querySelectorAll(".col").forEach(((e,t)=>{e.addEventListener("click",(()=>{const l=document.createElement("div");if(""!==e.textContent||!0===n.won)return;l.textContent="x"===n.currentPlayer?"x":"o",l.classList.add("item");const c="x"===n.currentPlayer?"player-x":"player-o";e.classList.add(c),e.append(l),n.fields[t]={...n.fields[t],mark:n.currentPlayer},n.currentPlayer="x"===n.currentPlayer?"o":"x",function(e){const t=n.fields.filter((t=>t.mark===e.mark&&t.x===e.x)),l=n.fields.filter((t=>t.mark===e.mark&&t.y===e.y)),c=n.fields.filter((t=>t.mark===e.mark&&t.y===t.x)),i=n.fields.filter((t=>t.mark===e.mark&&(0===t.x&&2===t.y||1===t.x&&1===t.y||2===t.x&&0===t.y)));if(3===t.length||3===l.length||3===c.length||3===i.length)return d(t),d(l),d(c),d(i),void setTimeout((()=>{r(`Победил "${e.mark.toUpperCase()}"`,""),o(document.querySelector(".modal-body"),"Сыграть еще")}),1500);const a=n.fields.filter((e=>"x"===e.mark||"o"===e.mark));9===a.length&&(r("Нет победителя",""),o(document.querySelector(".modal-body"),"Сыграть еще"))}(n.fields[t])}))})),c.remove()}))}function r(e,t){document.querySelector("body").insertAdjacentHTML("beforeend",`\n    <div class="modal-background">\n      <div class="modal">\n        <div class="modal-header">${e}</div>\n        <div class="modal-body">${t}</div>\n      </div>\n    </div>\n    `)}function d(e){if(3!==e.length)return;const t=document.querySelectorAll(".col");e.forEach((e=>{const o=n.fields.indexOf(e);t[o].firstElementChild.classList.add("strike")})),n.won=!0}!function(){const e=document.createElement("h1");e.textContent="Крестики-нолики",e.classList.add("title"),t.append(e),o(t,"Начать игру")}()}();